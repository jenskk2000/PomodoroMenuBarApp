name: macOS Build

on:
  push:
    branches: ["main", "master"]
  pull_request:

jobs:
  swift-package:
    runs-on: macos-14
    steps:
      - uses: actions/checkout@v4
      - name: Build Swift package
        run: |
          cd PomodoroBar
          swift build

  xcode-release:
    runs-on: macos-14
    steps:
      - uses: actions/checkout@v4
      - name: Build Xcode Release target (unsigned)
        run: |
          xcodebuild \
            -project PomodoroBarXcode/PomodoroBar.xcodeproj \
            -scheme PomodoroBar \
            -configuration Release \
            CODE_SIGNING_ALLOWED=NO \
            CODE_SIGNING_REQUIRED=NO \
            build
